"use client"

import type { PlotState, Tool } from "@/app/page"
import { SoilPlot } from "@/components/soil-plot"

type GardenGridProps = {
  plots: PlotState[]
  onPlotClick: (index: number) => void
  selectedTool: Tool
}

export function GardenGrid({ plots, onPlotClick, selectedTool }: GardenGridProps) {
  return (
    <div className="flex-1 relative overflow-hidden min-h-0">
      <div
        className="absolute inset-0"
        style={{
          background: "linear-gradient(180deg, #86efac 0%, #4ade80 50%, #22c55e 100%)",
          backgroundImage: `
          repeating-linear-gradient(
            0deg,
            transparent,
            transparent 2px,
            rgba(0,0,0,0.06) 2px,
            rgba(0,0,0,0.06) 4px
          ),
          repeating-linear-gradient(
            90deg,
            transparent,
            transparent 2px,
            rgba(0,0,0,0.04) 2px,
            rgba(0,0,0,0.04) 4px
          ),
          linear-gradient(
            180deg,
            #86efac 0%,
            #4ade80 50%,
            #22c55e 100%
          )
        `,
        }}
      >
        {/* Grass blade texture */}
        <svg className="absolute inset-0 w-full h-full opacity-15" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <pattern id="grass" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
              <path d="M10,40 Q10,30 8,20 T10,0" stroke="#14532d" strokeWidth="1" fill="none" />
              <path d="M15,40 Q15,28 17,18 T15,0" stroke="#14532d" strokeWidth="1" fill="none" />
              <path d="M25,40 Q25,32 23,22 T25,0" stroke="#14532d" strokeWidth="1" fill="none" />
              <path d="M30,40 Q30,29 32,19 T30,0" stroke="#14532d" strokeWidth="1" fill="none" />
            </pattern>
          </defs>
          <rect width="100%" height="100%" fill="url(#grass)" />
        </svg>
      </div>

      <div className="relative z-10 h-full flex items-center justify-center p-4 sm:p-6">
        <div className="relative w-full h-full flex items-center justify-center">
          {/* Wooden Fence Frame */}
          <div className="absolute -inset-3 sm:-inset-4 rounded-lg">
            {/* Top fence */}
            <div className="absolute top-0 left-0 right-0 h-5 sm:h-6 bg-gradient-to-b from-orange-700 to-orange-800 border-2 border-orange-950 rounded-t-lg flex items-center justify-around px-2">
              {[...Array(6)].map((_, i) => (
                <div
                  key={i}
                  className="w-3 h-6 sm:w-4 sm:h-8 bg-gradient-to-b from-orange-600 to-orange-700 border-2 border-orange-950 rounded-full"
                />
              ))}
            </div>

            {/* Bottom fence */}
            <div className="absolute bottom-0 left-0 right-0 h-5 sm:h-6 bg-gradient-to-b from-orange-700 to-orange-800 border-2 border-orange-950 rounded-b-lg flex items-center justify-around px-2">
              {[...Array(6)].map((_, i) => (
                <div
                  key={i}
                  className="w-3 h-6 sm:w-4 sm:h-8 bg-gradient-to-b from-orange-600 to-orange-700 border-2 border-orange-950 rounded-full"
                />
              ))}
            </div>

            {/* Left fence */}
            <div className="absolute top-5 bottom-5 sm:top-6 sm:bottom-6 left-0 w-5 sm:w-6 bg-gradient-to-r from-orange-700 to-orange-800 border-2 border-orange-950 flex flex-col items-center justify-around py-2">
              {[...Array(3)].map((_, i) => (
                <div
                  key={i}
                  className="w-6 h-3 sm:w-8 sm:h-4 bg-gradient-to-r from-orange-600 to-orange-700 border-2 border-orange-950 rounded-full"
                />
              ))}
            </div>

            {/* Right fence */}
            <div className="absolute top-5 bottom-5 sm:top-6 sm:bottom-6 right-0 w-5 sm:w-6 bg-gradient-to-r from-orange-700 to-orange-800 border-2 border-orange-950 flex flex-col items-center justify-around py-2">
              {[...Array(3)].map((_, i) => (
                <div
                  key={i}
                  className="w-6 h-3 sm:w-8 sm:h-4 bg-gradient-to-r from-orange-600 to-orange-700 border-2 border-orange-950 rounded-full"
                />
              ))}
            </div>
          </div>

          <div className="relative grid grid-cols-2 sm:grid-cols-3 gap-3 sm:gap-4 p-4 sm:p-5 w-full max-w-2xl">
            {plots.map((plot, index) => (
              <SoilPlot key={index} plot={plot} onClick={() => onPlotClick(index)} selectedTool={selectedTool} />
            ))}
          </div>
        </div>
      </div>
    </div>
  )
}